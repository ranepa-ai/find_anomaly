import os
import streamlit as st
import pandas as pd
import numpy as np
import base64
from streamlit_option_menu import option_menu
from site_pages import *

#@st.cache(allow_output_mutation=True)
def get_base64_of_bin_file(bin_file):
    with open(bin_file, 'rb') as f:
        data = f.read()
    return base64.b64encode(data).decode()

#@st.cache(allow_output_mutation=True)
def get_img_with_href(local_img_path, target_url):
    img_format = os.path.splitext(local_img_path)[-1].replace('.', '')
    bin_str = get_base64_of_bin_file(local_img_path)
    html_code = f'''<p style='text-align:center; color:grey;'> <a href="{target_url}">  <img src="data:image/{img_format};base64,{bin_str}" />  </a></p>'''
    return html_code

#–ì–ª–∞–≤—ã
chapters = {
    " 1) –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–º–∞—Ç–∏–∫–∏": ["–ö—Ä–∞—Ç–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è", "–ü—Ä–∏–º–µ—Ä—ã"],
    " 2) –ö—Ç–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω –≤ –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ?": ["–ø—Ä–∏–º–µ—Ä—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤", "–ê –µ—Å–ª–∏ —É –º–µ–Ω—è –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ñ–∏–ª—å?"],
    " 3) –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–µ–π—Å–∞": ["–¶–µ–ª–∏", "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ"],
    " 4) –ü—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è": ["–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è","–î–ª—è —Ä–∞–±–æ—Ç—ã –±–µ—Ä–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç"],
    " 5) –í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ": ["–¢–µ—Å—Ç","–°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã"]
}

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
#st.title("""–ü–æ–∏—Å–∫ –∞–Ω–æ–º–∞–ª–∏–π –≤ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏.""")
st.set_page_config(page_title="–ü–æ–∏—Å–∫ –∞–Ω–æ–º–∞–ª–∏–π –≤ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏.")

#–ö–∞—Ä—Ç–∏–Ω–∫–∞ —Å–ª–µ–≤–∞
with st.sidebar:
    redirect_url = "http://83.143.66.61:27369/"
    logo_image = '/home/nikolas/find_anomaly03/venv/images/logo-lck100x100.png'
    logo_html_100100 = get_img_with_href(logo_image, redirect_url)
    st.markdown(logo_html_100100, unsafe_allow_html=True)

with st.sidebar:
    selected = option_menu('',["1) –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–º–∞—Ç–∏–∫–∏","2) –ö—Ç–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω –≤ –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ?",
                               "3) –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–µ–π—Å–∞","4) –ü—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è","5) –í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ"])

if selected == "1) –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–º–∞—Ç–∏–∫–∏":
    first_page()
elif selected == "2) –ö—Ç–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω –≤ –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ?":
    second_page()
elif selected == "3) –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–µ–π—Å–∞":
    third_page()
# –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å –≥–ª–∞–≤–∞–º–∏
#chapter = st.sidebar.radio("–í—ã–±–µ—Ä–∏—Ç–µ –≥–ª–∞–≤—É", list(chapters.keys()))
#chapter_info = {
#    " 1) –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–º–∞—Ç–∏–∫–∏": {"icon": "üìñ", "description": """ # –ö—Ä–∞—Ç–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è. """},
#    " 2) –ö—Ç–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω –≤ –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ?": {"icon": "üë®‚Äçüë©‚Äçüë¶", "description": """# –ü—Ä–∏–º–µ—Ä—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤."""},
#    " 3) –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–µ–π—Å–∞": {"icon": "üìà", "description": """# –¶–µ–ª–∏ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã."""},
#    " 4) –ü—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è" : {"icon": "üìã", "description": """# –°–ª—É—á–∞–π–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –ò–ò –∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∑–∞–∫–æ–Ω—É –ø–µ—Ä–≤–æ–π —Ü–∏—Ñ—Ä—ã."""},
#    " 5) –í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ" : {"icon": "‚ùì", "description": """# –ö–∞—Ä–∞—Ç–∫–∏–π —Ç–µ—Å—Ç."""}
#}

